<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCOE Batterie Rechner</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem;
        }
        h1 {
            color: #333;
        }
        .container {
            background: #fff;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
        }
        label {
            display: block;
            margin: 1rem 0 0.2rem;
        }
        input {
            width: 100%;
            padding: 0.5rem;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 0.5rem;
        }
        button {
            margin-top: 1.5rem;
            padding: 0.75rem;
            width: 100%;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            cursor: pointer;
        }
        button:hover {
            background: #005f99;
        }
        .result {
            margin-top: 2rem;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 0.5rem;
            text-align: center;
        }
        th {
            background-color: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>LCOE-Rechner für Batteriespeicher</h1>
    <div class="container">
        <label for="dailyConsumption">Täglicher Verbrauch (kWh)</label>
        <input type="number" id="dailyConsumption" placeholder="z. B. 5" value="2">

        <label for="capacity">Batteriekapazität (kWh)</label>
        <input type="number" id="capacity" placeholder="z. B. 2" value="1">

        <label for="cost">Kosten der Batterie (EUR)</label>
        <input type="number" id="cost" placeholder="z. B. 5000" value="800">

        <label for="maxCycles">Maximale Zyklenzahl</label>
        <input type="number" id="maxCycles" placeholder="z. B. 6000" value="6000">

        <label for="maxLifetime">Maximale Lebensdauer (Jahre)</label>
        <input type="number" id="maxLifetime" placeholder="z. B. 15" value="20">

        <button onclick="calculateLCOE()">Berechne LCOE</button>

        <div class="result" id="result"></div>
    </div>

    <script>
        function calculateLCOE() {
            // Direkt im Code definierte Eingabewerte
            const dailyConsumption = 2;   // kWh
            const capacity = 1;          // kWh
            const cost = 800;            // EUR
            const maxCycles = 6000;
            const maxLifetime = 20;      // Jahre
            const resultDiv = document.getElementById("result");

            const usageScenarios = [100, 90, 80, 70, 60, 50, 40, 30, 20, 10];
            let tableHTML = '<table>';
            tableHTML += '<tr><th>Nutzung (%)</th><th>Tagesbedarf (kWh)</th><th>Benötigte Zyklen pro Tag</th><th>Lebensdauer (Jahre)</th><th>Gesamtenergie (kWh)</th><th>LCOE (ct/kWh)</th></tr>';

            usageScenarios.forEach(usage => {
                const usageDecimal = usage / 100;
                const dailyDemand = dailyConsumption * usageDecimal;
                const equivalentFullCyclesPerDay = dailyDemand / capacity;
                const lifetimeByCycles = maxCycles / equivalentFullCyclesPerDay / 365;
                const lifetime = Math.min(lifetimeByCycles, maxLifetime);
                const totalEnergy = Math.min(dailyConsumption * 365 * lifetime, maxCycles * capacity);
                const lcoe = (cost / totalEnergy) * 100;

                tableHTML += `<tr>
                    <td>${usage}%</td>
                    <td>${dailyDemand.toFixed(2)}</td>
                    <td>${equivalentFullCyclesPerDay.toFixed(2)}</td>
                    <td>${lifetime.toFixed(2)}</td>
                    <td>${totalEnergy.toFixed(0)}</td>
                    <td>${lcoe.toFixed(2)}</td>
                </tr>`;
            });

            tableHTML += '</table>';
            resultDiv.innerHTML = tableHTML;
        }
        // Die Funktion wird aufgerufen, sobald das Skript geladen ist
        calculateLCOE();
    </script>
</body>
</html>
